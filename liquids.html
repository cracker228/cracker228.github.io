<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–ö–∞—Ç–∞–ª–æ–≥ 1</title>
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #e4edf5 100%);
      margin: 0;
      padding: 20px;
      padding-bottom: 100px;
    }

    .back-btn {
      background-color: #6c757d;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      margin-bottom: 20px;
      transition: background-color 0.3s;
    }

    .back-btn:hover {
      background-color: #5a6268;
    }

    .product-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 25px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .product-card {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 6px 16px rgba(0,0,0,0.1);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .product-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 24px rgba(0,0,0,0.15);
    }

    .product-image {
      width: 100%;
      height: 160px;
      object-fit: cover;
      display: block;
    }

    .product-info {
      padding: 16px;
    }

    .product-title {
      font-weight: 600;
      font-size: 1.2em;
      margin: 0 0 8px;
      color: #2c3e50;
    }

    .product-desc {
      font-size: 0.9em;
      color: #7f8c8d;
      margin: 0 0 12px;
      line-height: 1.4;
    }

    .product-price {
      color: #e74c3c;
      font-weight: bold;
      font-size: 1.3em;
      margin-top: 8px;
    }

    .add-to-cart-btn {
      background-color: #2ecc71;
      color: white;
      border: none;
      width: 100%;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1em;
      transition: background-color 0.3s;
    }

    .add-to-cart-btn:hover {
      background-color: #27ae60;
    }

    .tab-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: white;
      display: flex;
      justify-content: space-around;
      align-items: center;
      box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
      z-index: 1000;
    }

    .tab-btn {
      background: none;
      border: none;
      font-size: 1.5em;
      cursor: pointer;
      padding: 10px;
      border-radius: 8px;
      transition: background-color 0.2s;
    }

    .tab-btn.active {
      background-color: #e0e7ff;
    }

    .tab-btn:hover {
      background-color: #f0f2f5;
    }

    #cart-page, #profile-page, #order-confirm-page {
      display: none;
      padding: 20px;
    }

    .cart-item {
      display: flex;
      align-items: center;
      padding: 10px;
      border-bottom: 1px solid #eee;
    }

    .cart-item img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      margin-right: 15px;
      border-radius: 8px;
    }

    .cart-item-info {
      flex-grow: 1;
    }

    .remove-from-cart {
      background: #e74c3c;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 5px;
      cursor: pointer;
    }

    .empty-cart {
      text-align: center;
      color: #7f8c8d;
      margin-top: 20px;
    }

    .total-price {
      font-size: 1.4em;
      font-weight: bold;
      color: #27ae60;
      margin: 15px 0;
      text-align: center;
    }

    .checkout-btn {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 15px;
      width: 100%;
      border-radius: 10px;
      font-size: 1.2em;
      cursor: pointer;
      margin-top: 20px;
    }

    .checkout-btn:hover {
      background-color: #2980b9;
    }

    .input-field {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 1em;
    }

    .confirm-order-btn {
      background-color: #9b59b6;
      color: white;
      border: none;
      padding: 15px;
      width: 100%;
      border-radius: 10px;
      font-size: 1.2em;
      cursor: pointer;
      margin-top: 20px;
    }

    .confirm-order-btn:hover {
      background-color: #8e44ad;
    }
  </style>
</head>
<body>

  <button class="back-btn" onclick="history.back()">‚Üê –ù–∞–∑–∞–¥</button>

  <div id="catalog-page">
    <div id="products-container" class="product-grid">
      <!-- –ö–∞—Ä—Ç–æ—á–∫–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —Å—é–¥–∞ -->
    </div>
  </div>

  <div id="cart-page">
    <h2>–ö–æ—Ä–∑–∏–Ω–∞</h2>
    <div id="cart-items">
      <!-- –¢–æ–≤–∞—Ä—ã –∏–∑ –∫–æ—Ä–∑–∏–Ω—ã -->
    </div>
    <div id="empty-cart-message" class="empty-cart">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</div>
    <div id="total-price" class="total-price">–ò—Ç–æ–≥–æ: 0 —Ä—É–±.</div>
    <button id="checkout-btn" class="checkout-btn" style="display:none;" onclick="showOrderConfirm()">–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </div>

  <div id="profile-page">
    <h2>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h2>
    <label>–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:</label>
    <textarea id="delivery-address" class="input-field" placeholder="–£–ª–∏—Ü–∞, –¥–æ–º, –∫–≤–∞—Ä—Ç–∏—Ä–∞..."></textarea>
    <button onclick="saveAddress()" class="checkout-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
  </div>

  <div id="order-confirm-page">
    <h2>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h2>
    <p><strong>–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏:</strong> <span id="address-display">–ù–µ —É–∫–∞–∑–∞–Ω</span></p>
    <p><strong>–°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤:</strong></p>
    <ul id="order-items-list"></ul>
    <p><strong>–ò—Ç–æ–≥–æ:</strong> <span id="final-total">0</span> —Ä—É–±.</p>
    <button class="confirm-order-btn" onclick="confirmOrder()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
  </div>

  <!-- –ü–∞–Ω–µ–ª—å –≤–∫–ª–∞–¥–æ–∫ -->
  <div class="tab-bar">
    <button class="tab-btn active" data-tab="catalog">
      üì¶ <!-- –ò–∫–æ–Ω–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞ -->
    </button>
    <button class="tab-btn" data-tab="cart">
      üõí <!-- –ò–∫–æ–Ω–∫–∞ –∫–æ—Ä–∑–∏–Ω—ã -->
    </button>
    <button class="tab-btn" data-tab="profile">
      üë§ <!-- –ò–∫–æ–Ω–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
    </button>
  </div>

  <script>
    let cart = JSON.parse(localStorage.getItem('cart')) || [];
    let deliveryAddress = localStorage.getItem('deliveryAddress') || '';

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
    fetch('liquids.json')
      .then(response => response.json())
      .then(products => {
        const container = document.getElementById('products-container');
        products.forEach((product, index) => {
          const card = `
            <div class="product-card">
              <img src="${product.image}" alt="${product.title}" class="product-image">
              <div class="product-info">
                <div class="product-title">${product.title}</div>
                <div class="product-desc">${product.description}</div>
                <div class="product-price">${product.price} —Ä—É–±.</div>
                <button class="add-to-cart-btn" onclick="addToCart(${index})">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</button>
              </div>
            </div>
          `;
          container.innerHTML += card;
        });
      });

    function addToCart(index) {
      fetch('liquids.json')
        .then(response => response.json())
        .then(products => {
          const product = { ...products[index], id: Date.now() };
          cart.push(product);
          localStorage.setItem('cart', JSON.stringify(cart));
          alert(`${product.title} –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∫–æ—Ä–∑–∏–Ω—É!`);
        });
    }

    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        const tab = btn.getAttribute('data-tab');

        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');

        document.getElementById('catalog-page').style.display = 'none';
        document.getElementById('cart-page').style.display = 'none';
        document.getElementById('profile-page').style.display = 'none';
        document.getElementById('order-confirm-page').style.display = 'none';

        if (tab === 'catalog') {
          document.getElementById('catalog-page').style.display = 'block';
        } else if (tab === 'cart') {
          renderCart();
          document.getElementById('cart-page').style.display = 'block';
        } else if (tab === 'profile') {
          document.getElementById('profile-page').style.display = 'block';
          document.getElementById('delivery-address').value = deliveryAddress;
        }
      });
    });

    // –†–µ–Ω–¥–µ—Ä –∫–æ—Ä–∑–∏–Ω—ã
    function renderCart() {
      const container = document.getElementById('cart-items');
      const emptyMessage = document.getElementById('empty-cart-message');
      const totalElement = document.getElementById('total-price');
      const checkoutBtn = document.getElementById('checkout-btn');

      if (cart.length === 0) {
        container.innerHTML = '';
        emptyMessage.style.display = 'block';
        totalElement.textContent = '–ò—Ç–æ–≥–æ: 0 —Ä—É–±.';
        checkoutBtn.style.display = 'none';
        return;
      }

      emptyMessage.style.display = 'none';
      container.innerHTML = '';

      let total = 0;

      cart.forEach(item => {
        total += item.price;
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
          <img src="${item.image}" alt="${item.title}">
          <div class="cart-item-info">
            <strong>${item.title}</strong><br>
            ${item.price} —Ä—É–±.
          </div>
          <button class="remove-from-cart" onclick="removeFromCart(${item.id})">–£–¥–∞–ª–∏—Ç—å</button>
        `;
        container.appendChild(div);
      });

      totalElement.textContent = `–ò—Ç–æ–≥–æ: ${total} —Ä—É–±.`;
      checkoutBtn.style.display = 'block';
    }

    function removeFromCart(id) {
      cart = cart.filter(item => item.id !== id);
      localStorage.setItem('cart', JSON.stringify(cart));
      renderCart();
    }

    // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∞–¥—Ä–µ—Å–∞
    function saveAddress() {
      deliveryAddress = document.getElementById('delivery-address').value;
      localStorage.setItem('deliveryAddress', deliveryAddress);
      alert('–ê–¥—Ä–µ—Å —Å–æ—Ö—Ä–∞–Ω—ë–Ω!');
    }

    // –ü–æ–∫–∞–∑ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
    function showOrderConfirm() {
      if (!deliveryAddress.trim()) {
        alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —É–∫–∞–∂–∏—Ç–µ –∞–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏ –≤ –ø—Ä–æ—Ñ–∏–ª–µ.');
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelector('[data-tab="profile"]').classList.add('active');
        document.getElementById('profile-page').style.display = 'block';
        document.getElementById('cart-page').style.display = 'none';
        return;
      }

      document.getElementById('address-display').textContent = deliveryAddress;

      const list = document.getElementById('order-items-list');
      list.innerHTML = '';
      cart.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.title} ‚Äî ${item.price} —Ä—É–±.`;
        list.appendChild(li);
      });

      const finalTotal = cart.reduce((sum, item) => sum + item.price, 0);
      document.getElementById('final-total').textContent = finalTotal;

      document.getElementById('catalog-page').style.display = 'none';
      document.getElementById('cart-page').style.display = 'none';
      document.getElementById('profile-page').style.display = 'none';
      document.getElementById('order-confirm-page').style.display = 'block';
    }

    // === –§–£–ù–ö–¶–ò–Ø –û–¢–ü–†–ê–í–ö–ò –ó–ê–ö–ê–ó–ê –ß–ï–†–ï–ó –ë–û–¢–ê –î–õ–Ø –ó–ê–ö–ê–ó–û–í ===
    function confirmOrder() {
      if (cart.length === 0) {
        alert('–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞!');
        return;
      }

      const orderInfo = {
        items: cart.map(item => `${item.title} ‚Äî ${item.price} —Ä—É–±.`).join('\n'),
        address: deliveryAddress,
        total: cart.reduce((sum, item) => sum + item.price, 0),
        timestamp: new Date().toLocaleString()
      };

      const botToken = '8433153883:AAHk67WTLLgo_khibbAWApikmTmc-auyMsk'; // ‚Üê –ó–ê–ú–ï–ù–ò–¢–¨ –ù–ê –ù–û–í–´–ô –¢–û–ö–ï–ù
      const chatId = '6249163361';                  // ‚Üê –ó–ê–ú–ï–ù–ò–¢–¨ –ù–ê –°–í–û–ô ID

      const message = `üì¶ –ù–æ–≤—ã–π –∑–∞–∫–∞–∑!\n\n${orderInfo.items}\n\nüìç –ê–¥—Ä–µ—Å: ${orderInfo.address}\nüí∞ –ò—Ç–æ–≥–æ: ${orderInfo.total} —Ä—É–±.\nüïí –í—Ä–µ–º—è: ${orderInfo.timestamp}`;

      fetch(`https://api.telegram.org/bot${botToken}/sendMessage`, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          chat_id: chatId,
          text: message
        })
      })
      .then(response => response.json())
      .then(data => {
        if (data.ok) {
          alert('–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –∫—É—Ä—å–µ—Ä—É!');
          cart = [];
          localStorage.removeItem('cart');
          document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
          document.querySelector('[data-tab="catalog"]').classList.add('active');
          document.getElementById('order-confirm-page').style.display = 'none';
          document.getElementById('catalog-page').style.display = 'block';
        } else {
          alert('–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –∑–∞–∫–∞–∑–∞.');
        }
      })
      .catch(err => {
        console.error('–û—à–∏–±–∫–∞:', err);
        alert('–ù–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–∫–∞–∑. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ.');
      });
    }
  </script>

</body>
</html>
